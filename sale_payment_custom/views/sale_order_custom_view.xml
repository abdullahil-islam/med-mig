<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="payment_status_form_inherit" model="ir.ui.view">
            <field name="name">payment.status.form.inherit</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account.view_account_payment_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_id']" position="after"> 
                    <field name="sale_order_id" string="Select Sales Order" attrs="{'invisible':[('partner_type','!=','customer')],'required':[('partner_type','=','customer')],'readonly':[('state','!=','draft')]}" domain="[('payment_type','=','bank/cheque'), ('partner_id', '=', partner_id)]"/>
                    <field name="payment_for" attrs="{'invisible':[('partner_type','!=','customer')],'required':[('partner_type','=','customer')],'readonly':[('state','!=','draft')]}"/>
                    <field name="downpayment" attrs="{'invisible':['|',('partner_type','!=','customer'),('payment_for','=','token')]}"/>
                    <field name="token_money" attrs="{'invisible':['|',('partner_type','!=','customer'),('payment_for','=','downpayment')]}"/>
                    <field name="downpayment_status" attrs="{'invisible':['|',('partner_type','!=','customer'),('payment_for','=','token')]}"/>
                    <field name="token_money_status" attrs="{'invisible':['|',('partner_type','!=','customer'),('payment_for','=','downpayment')]}"/>
                </xpath>
            </field>
        </record>

	<record id="sale_order_form_custom" model="ir.ui.view">
		<field name="model">sale.order</field>
		<field name="inherit_id" ref="sale.view_order_form" />
		<field name="arch" type="xml">
		    <field name="payment_term_id" position="after">
		        <field name="payment_type" attrs="{'invisible':[('payment_term_id','!=',%(sale_payment_custom.account_payment_term_full)d),('payment_term_id','!=',%(sale_payment_custom.account_payment_term_installment)d)]}"/>
		        <field name="payment_mode" attrs="{'invisible':[('payment_type','!=','bank/cheque')]}" />
		    </field>
		    
		    <xpath expr="//notebook/page[@name='other_information']" position="after">
		    	<page name="cheque_details_id" string="Cheque Details" attrs="{'invisible':[('payment_type','!=','bank/cheque')]}">
    		    	<group name="DownPayment">
    		    	    <group>
    		    	         <field name="token_money"/>
    		    	         <field name="token_money_status" readonly="1"/>
    		    	    </group>
    		    	    <group>
	    		    	    <field name="downpayment"/>
	    		    	    <field name="downpayment_status" readonly="1"/>
	    		    	</group>
    		    	</group>
    		    	<group>
					<field name="cheque_detail_ids" widget="one2many_list">
						<tree string="Cheque Details" editable="bottom">
							<field name="currency_id" invisible="1" />
							<field name="bank_id" string="Bank Name"  attrs="{'readonly':[('cheque_status','=','owner')]}"/>
							<field name="cheque_number" string="Cheque Number" attrs="{'readonly':[('cheque_status','=','owner')]}"/>
							<field name="cheque_date" string="Cheque Date" attrs="{'readonly':[('cheque_status','=','owner')]}"/>
							<field name="amount" widget="monetary" string="Amount" options="{'currency_field': 'currency_id'}" attrs="{'readonly':[('cheque_status','=','owner')]}"/>
							<field name="description" string="Description"/>
							<field name="cheque_file" string="Cheque File" attrs="{'readonly':[('cheque_status','=','owner')]}"/>
							<field name="cheque_status" string="Cheque Status" readonly="1"/>
							<field name="sale_id" string="Sale Order" invisible="1" />
						</tree>
					</field>
					</group>
				</page>
			</xpath>
		</field>
	</record>


</odoo>