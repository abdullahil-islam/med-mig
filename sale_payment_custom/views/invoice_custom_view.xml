<?xml version="1.0" encoding="utf-8"?>
<odoo>


	<record id="invoice_form_custom_cheque_form1" model="ir.ui.view">
		<field name="name">account_invoice_cheque_custom_form</field>
		<field name="model">account.move</field>
		<field name="inherit_id" ref="account.view_move_form" />
		<field name="arch" type="xml">
		    
		    <xpath expr="//field[@name='partner_id']" position="after">
				<field name="sale_order_id" string="Sale Order ID" readonly="0"/>
		        <field name="payment_type" />
		        <field name="payment_mode" />
			</xpath>
			
		    <xpath expr="//notebook/page[@name='other_info']" position="after">
		    	<page name="cheque_details_id" string="Cheque Details" >
		    	     <group name="DownPayment">
                        <group>
                             <field name="token_money"/>
                             <field name="token_money_status"/>
                        </group>
                        <group>
                            <field name="downpayment"/>
                            <field name="downpayment_status"/>
                        </group>
                    </group>
                    <group>
					<field name="cheque_detail_ids" widget="one2many_list">
						<tree string="Cheque Details" editable="bottom">
							<field name="currency_id" invisible="1"/>
							<field name="bank_id" string="Bank Name" />
							<field name="cheque_number" string="Cheque Number" />
							<field name="cheque_date" string="Cheque Date"/>
							<field name="amount" widget="monetary" string="Amount" options="{'currency_field': 'currency_id'}"/>
							<field name="description" string="Description"/>
							<field name="cheque_file" string="Cheque File"/>
							<field name="cheque_status" string="Cheque Status" readonly="1"/>
							<field name="sale_id" string="Sale Order" invisible="1" />
						</tree>
					</field>
					</group>
				</page>
			</xpath>
			
		</field>
	</record>

	<record id="payment_form_custom1" model="ir.ui.view">
		<field name="name">payment_cheque_custom_form</field>
		<field name="model">account.payment.register</field>
		<field name="inherit_id" ref="account.view_account_payment_register_form" />
		<field name="arch" type="xml">
		    
		    <xpath expr="//field[@name='journal_id']" position="after">
				<field name="sale_order_id" string="Sale Order ID" invisible="0"/>
				<field name="is_check_payment" invisible="1"/>
			</xpath>
		    
		    <xpath expr="//footer" position="before">
		         <group>
					<field name="check_id" string="Select Cheque for payment" attrs="{'invisible':[('is_check_payment','=',False)], 'required':[('is_check_payment','!=',False)]}" domain="[('sale_id', '=', sale_order_id),('cheque_status','=','pending')]" widget="selection"/>
			     </group>
				<field name="cheque_detail_ids" widget="one2many_list" readonly="0" attrs="{'invisible':[('is_check_payment','=',False)]}">
					<tree string="Cheque Details" editable="bottom" create="false" delete="false">
						<field name="currency_id" invisible="1"/>
						<field name="bank_id" string="Bank Name" readonly="1"/>
						<field name="cheque_number" string="Cheque Number" readonly="1"/>
						<field name="cheque_date" string="Cheque Date" readonly="1"/>
						<field name="amount" widget="monetary" string="Amount" options="{'currency_field': 'currency_id'}" readonly="1"/>
						<field name="description" string="Description" readonly="1"/>
						<field name="cheque_file" string="Cheque File" readonly="1" invisible="1"/>
						<field name="cheque_status" string="Cheque Status" readonly="1"/>
						<field name="sale_id" string="Sale Order" invisible="1" />
					</tree>
				</field>
			</xpath>
			
		</field>
	</record>
	
	<record id="view_account_journal_form_inherit_check" model="ir.ui.view">
            <field name="name">account.journal.form</field>
            <field name="model">account.journal</field>
            <field name="inherit_id" ref="account.view_account_journal_form"/>
            <field name="arch" type="xml">
                <field name="code" position="before">
                    <field name="is_check_payment" />
                </field>
            </field>
        </record>

</odoo>
